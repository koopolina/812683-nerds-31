const modalButton=document.querySelector(".modal-button"),modalPopup=document.querySelector(".modal"),modalClose=modalPopup.querySelector(".modal-close"),modalForm=modalPopup.querySelector(".text-form"),modalName=modalPopup.querySelector(".text-name"),modalMail=modalPopup.querySelector(".text-mail"),modalText=modalPopup.querySelector(".text-text");let isStorageSupport=!0,storageName="",storageMail="";try{storageName=localStorage.getItem("name"),storageMail=localStorage.getItem("mail")}catch(o){isStorageSupport=!1}modalButton.addEventListener("click",function(o){o.preventDefault(),modalPopup.classList.add("modal-show"),storageName?(modalName.value=storageName,modalMail.focus()):modalName.focus(),storageMail?(modalMail.value=storageMail,modalText.focus()):modalName.focus()}),modalClose.addEventListener("click",function(o){o.preventDefault(),modalPopup.classList.remove("modal-show"),modalPopup.classList.add("modal-error")}),modalForm.addEventListener("submit",function(o){modalName.value&&modalMail.value&&modalText.value?isStorageSupport&&(localStorage.setItem("name",modalName.value),localStorage.setItem("mail",modalMail.value)):(o.preventDefault(),modalPopup.classList.remove("modal-error"),modalPopup.offsetWidth=modalPopup.offsetWidth,modalPopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(o){"Esc"!==o.key&&"Escape"!==o.key||modalPopup.classList.contains("modal-show")&&(o.preventDefault(),modalPopup.classList.remove("modal-show"))});
